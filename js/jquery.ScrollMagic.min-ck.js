/* ScrollMagic v1.3.0 | (c) 2014 Jan Paepke (@janpaepke) | license & info: http://janpaepke.github.io/ScrollMagic */!function(e,t){if("function"==typeof define&&define.amd)define(["jquery","TweenMax","TimelineMax"],t);else{var n=t(e.jQuery,e.TweenMax,e.TimelineMax);e.ScrollMagic=n.Controller,e.ScrollScene=n.Scene}}(this,function(e,t,n){var r=function(t){var n,r,u="ScrollMagic",h={container:window,vertical:!0,globalSceneOptions:{},loglevel:2,refreshInterval:100},p=this,d=e.extend({},h,t),v=[],m=!1,g=0,y="PAUSED",b=!0,w=0,E=!0,S=function(){if(p.version=p.constructor.version,e.each(d,function(e){h.hasOwnProperty(e)||delete d[e]}),d.container=e(d.container).first(),0===d.container.length)throw u+" init failed.";b=!e.contains(document,d.container.get(0)),b||d.container.on("resize",function(e){e.stopPropagation()}),w=d.vertical?d.container.height():d.container.width(),d.container.on("scroll resize",C),d.refreshInterval=parseInt(d.refreshInterval),d.refreshInterval>0&&(r=window.setInterval(k,d.refreshInterval)),n=a(N)},x=function(){return d.vertical?d.container.scrollTop():d.container.scrollLeft()},T=function(e){d.vertical?d.container.scrollTop(e):d.container.scrollLeft(e)},N=function(){if(n=a(N),E&&m){var t=e.isArray(m)?m:v.slice(0),r=g;g=p.scrollPos();var i=g-r;y=0===i?"PAUSED":i>0?"FORWARD":"REVERSE",0>i&&t.reverse(),e.each(t,function(e,t){t.update(!0)}),0===t.length&&d.loglevel>=3,m=!1}},C=function(e){"resize"==e.type&&(w=d.vertical?d.container.height():d.container.width()),m=!0},k=function(){b||w!=(d.vertical?d.container.height():d.container.width())&&d.container.trigger("resize"),e.each(v,function(e,t){t.refresh()})},L=function(e){if(e.length<=1)return e;var t=e.slice(0);return t.sort(function(e,t){return e.scrollOffset()>t.scrollOffset()?1:-1}),t};return this.addScene=function(t){return e.isArray(t)?e.each(t,function(e,t){p.addScene(t)}):t instanceof i&&(t.parent()!=p?t.addTo(p):e.inArray(t,v)<0&&(v.push(t),v=L(v),t.on("shift."+u+"_sort",function(){v=L(v)}),e.each(d.globalSceneOptions,function(e,n){t[e]&&t[e].call(t,n)}))),p},this.removeScene=function(t){if(e.isArray(t))e.each(t,function(e,t){p.removeScene(t)});else{var n=e.inArray(t,v);n>-1&&(t.off("shift."+u+"_sort"),v.splice(n,1),t.remove())}return p},this.updateScene=function(t,n){return e.isArray(t)?e.each(t,function(e,t){p.updateScene(t,n)}):n?t.update(!0):(e.isArray(m)||(m=[]),-1==e.inArray(t,m)&&m.push(t),m=L(m)),p},this.update=function(e){return C({type:"resize"}),e&&N(),p},this.scrollTo=function(t){if(t instanceof i)t.parent()===p?p.scrollTo(t.scrollOffset()):log(2,"scrollTo(): The supplied scene does not belong to this controller. Scroll cancelled.",t);else if("string"===e.type(t)||o(t)||t instanceof e){var n=e(t).first();if(n[0]){var r=d.vertical?"top":"left",u=s(d.container),a=s(n);b||(u[r]-=p.scrollPos()),p.scrollTo(a[r]-u[r])}else log(2,"scrollTo(): The supplied element could not be found. Scroll cancelled.",t)}else e.isFunction(t)?T=t:T.call(d.container[0],t);return p},this.scrollPos=function(t){return arguments.length?(e.isFunction(t)&&(x=t),p):x.call(p)},this.info=function(e){var t={size:w,vertical:d.vertical,scrollPos:g,scrollDirection:y,container:d.container,isDocument:b};return arguments.length?void 0!==t[e]?t[e]:void 0:t},this.loglevel=function(e){return arguments.length?(d.loglevel!=e&&(d.loglevel=e),p):d.loglevel},this.enabled=function(e){return arguments.length?(E!=e&&(E=!!e,p.updateScene(v,!0)),p):E},this.destroy=function(e){window.clearTimeout(r);for(var t=v.length;t--;)v[t].destroy(e);return d.container.off("scroll resize",C),f(n),null},S(),p};r.version="1.3.0";var i=function(t){var i,o,a,f,l,c,h,p={onCenter:.5,onEnter:1,onLeave:0},d="ScrollScene",v={duration:0,offset:0,triggerElement:null,triggerHook:"onCenter",reverse:!0,tweenChanges:!1,loglevel:2},m=this,g=e.extend({},v,t),y="BEFORE",b=0,w={start:0,end:0},E=0,S=!0,x={unknownOptionSupplied:function(){e.each(g,function(e){v.hasOwnProperty(e)||delete g[e]})},duration:function(){if(e.isFunction(g.duration)){i=g.duration;try{g.duration=parseFloat(i())}catch(t){i=void 0,g.duration=v.duration}}else g.duration=parseFloat(g.duration),(!e.isNumeric(g.duration)||g.duration<0)&&(g.duration=v.duration)},offset:function(){g.offset=parseFloat(g.offset),e.isNumeric(g.offset)||(g.offset=v.offset)},triggerElement:function(){null!==g.triggerElement&&0===e(g.triggerElement).length&&(g.triggerElement=v.triggerElement)},triggerHook:function(){g.triggerHook in p||(g.triggerHook=e.isNumeric(g.triggerHook)?Math.max(0,Math.min(parseFloat(g.triggerHook),1)):v.triggerHook)},reverse:function(){g.reverse=!!g.reverse},tweenChanges:function(){g.tweenChanges=!!g.tweenChanges}},T=function(){N(),m.on("change.internal",function(e){"loglevel"!==e.what&&"tweenChanges"!==e.what&&("triggerElement"===e.what?A():"reverse"===e.what&&m.update())}).on("shift.internal",function(e){k(),m.update(),("AFTER"===y&&"duration"===e.reason||"DURING"===y&&0===g.duration)&&M()}).on("progress.internal",function(){O(),M()}).on("destroy",function(e){e.preventDefault()})},N=function(t){if(arguments.length)e.isArray(t)||(t=[t]);else{t=[];for(var n in x)t.push(n)}e.each(t,function(e,t){x[t]&&x[t]()})},C=function(e,t){var n=!1,r=g[e];return g[e]!=t&&(g[e]=t,N(e),n=r!=g[e]),n},k=function(){w={start:E+g.offset},o&&g.triggerElement&&(w.start-=o.info("size")*m.triggerHook()),w.end=w.start+g.duration},L=function(e){if(i){var t="duration";C(t,i.call(m))&&!e&&(m.trigger("change",{what:t,newval:g[t]}),m.trigger("shift",{reason:t}))}},A=function(t){var n=0;if(o&&g.triggerElement){for(var r=e(g.triggerElement).first(),i=o.info(),u=s(i.container),a=i.vertical?"top":"left";r.parent().data("ScrollMagicPinSpacer");)r=r.parent();var f=s(r);i.isDocument||(u[a]-=o.scrollPos()),n=f[a]-u[a]}var l=n!=E;E=n,l&&!t&&m.trigger("shift",{reason:"triggerElementPosition"})},O=function(e){if(a){var t=e>=0&&1>=e?e:b;if(-1===a.repeat())if("DURING"===y&&a.paused())a.play();else{if("DURING"===y||a.paused())return!1;a.pause()}else{if(t==a.progress())return!1;0===g.duration?"DURING"===y?a.play():a.reverse():g.tweenChanges?a.tweenTo(t*a.duration()):a.progress(t).pause()}return!0}return!1},M=function(e){if(f&&o){var t=o.info();if(e||"DURING"!==y){var n={position:l.inFlow?"relative":"absolute",top:0,left:0},r=f.css("position")!=n.position;l.pushFollowers?g.duration>0&&("AFTER"===y&&0===parseFloat(l.spacer.css("padding-top"))?r=!0:"BEFORE"===y&&0===parseFloat(l.spacer.css("padding-bottom"))&&(r=!0)):n[t.vertical?"top":"left"]=g.duration*b,f.css(n),r&&(f.removeClass(l.pinnedClass),_())}else{"fixed"!=f.css("position")&&(f.css("position","fixed"),_(),f.addClass(l.pinnedClass));var i=s(l.spacer,!0),u=g.reverse||0===g.duration?t.scrollPos-w.start:Math.round(b*g.duration*10)/10;i.top-=parseFloat(l.spacer.css("margin-top")),i[t.vertical?"top":"left"]+=u,f.css({top:i.top,left:i.left})}}},_=function(){if(f&&o&&l.inFlow){var t="AFTER"===y,n="BEFORE"===y,r="DURING"===y,i="fixed"==f.css("position"),s=o.info("vertical"),a=l.spacer.children().first(),c=u(l.spacer.css("display")),h={};c?(h["margin-top"]=n||r&&i?f.css("margin-top"):"auto",h["margin-bottom"]=t||r&&i?f.css("margin-bottom"):"auto"):h["margin-top"]=h["margin-bottom"]="auto",l.relSize.width||l.relSize.autoFullWidth?i?e(window).width()==l.spacer.parent().width()?f.css("width",l.relSize.autoFullWidth?"100%":"inherit"):f.css("width",l.spacer.width()):f.css("width","100%"):(h["min-width"]=a.outerWidth(!a.is(f)),h.width=i?h["min-width"]:"auto"),l.relSize.height?i?e(window).height()==l.spacer.parent().height()?f.css("height","inherit"):f.css("height",l.spacer.height()):f.css("height","100%"):(h["min-height"]=a.outerHeight(!c),h.height=i?h["min-height"]:"auto"),l.pushFollowers&&(h["padding"+(s?"Top":"Left")]=g.duration*b,h["padding"+(s?"Bottom":"Right")]=g.duration*(1-b)),l.spacer.css(h)}},D=function(){o&&f&&"DURING"===y&&!o.info("isDocument")&&M()},P=function(){o&&f&&"DURING"===y&&((l.relSize.width||l.relSize.autoFullWidth)&&e(window).width()!=l.spacer.parent().width()||l.relSize.height&&e(window).height()!=l.spacer.parent().height())&&_()},H=function(e){o&&f&&"DURING"===y&&!o.info("isDocument")&&(e.preventDefault(),o.scrollTo(o.info("scrollPos")-(e.originalEvent.wheelDelta/3||30*-e.originalEvent.detail)))};return this.parent=function(){return o},this.duration=function(t){var n="duration";return arguments.length?(e.isFunction(t)||(i=void 0),C(n,t)&&(m.trigger("change",{what:n,newval:g[n]}),m.trigger("shift",{reason:n})),m):g[n]},this.offset=function(e){var t="offset";return arguments.length?(C(t,e)&&(m.trigger("change",{what:t,newval:g[t]}),m.trigger("shift",{reason:t})),m):g[t]},this.triggerElement=function(e){var t="triggerElement";return arguments.length?(C(t,e)&&m.trigger("change",{what:t,newval:g[t]}),m):g[t]},this.triggerHook=function(t){var n="triggerHook";return arguments.length?(C(n,t)&&(m.trigger("change",{what:n,newval:g[n]}),m.trigger("shift",{reason:n})),m):e.isNumeric(g[n])?g[n]:p[g[n]]},this.reverse=function(e){var t="reverse";return arguments.length?(C(t,e)&&m.trigger("change",{what:t,newval:g[t]}),m):g[t]},this.tweenChanges=function(e){var t="tweenChanges";return arguments.length?(C(t,e)&&m.trigger("change",{what:t,newval:g[t]}),m):g[t]},this.loglevel=function(e){var t="loglevel";return arguments.length?(C(t,e)&&m.trigger("change",{what:t,newval:g[t]}),m):g[t]},this.state=function(){return y},this.triggerPosition=function(){var e=g.offset;return o&&(e+=g.triggerElement?E:o.info("size")*m.triggerHook()),e},this.triggerOffset=function(){return m.triggerPosition()},this.scrollOffset=function(){return w.start},this.update=function(e){if(o)if(e)if(o.enabled()&&S){var t,n=o.info("scrollPos");t=g.duration>0?(n-w.start)/(w.end-w.start):n>=w.start?1:0,m.trigger("update",{startPos:w.start,endPos:w.end,scrollPos:n}),m.progress(t)}else f&&"DURING"===y&&M(!0);else o.updateScene(m,!1);return m},this.refresh=function(){return L(),A(),m},this.progress=function(e){if(arguments.length){var t=!1,n=y,r=o?o.info("scrollDirection"):"PAUSED",i=g.reverse||e>=b;if(0===g.duration?(t=b!=e,b=1>e&&i?0:1,y=0===b?"BEFORE":"DURING"):0>=e&&"BEFORE"!==y&&i?(b=0,y="BEFORE",t=!0):e>0&&1>e&&i?(b=e,y="DURING",t=!0):e>=1&&"AFTER"!==y?(b=1,y="AFTER",t=!0):"DURING"!==y||i||M(),t){var s={progress:b,state:y,scrollDirection:r},u=y!=n,a=function(e){m.trigger(e,s)};u&&"DURING"!==n&&(a("enter"),a("BEFORE"===n?"start":"end")),a("progress"),u&&"DURING"!==y&&(a("BEFORE"===y?"start":"end"),a("leave"))}return m}return b},this.setTween=function(e){if(!n)return m;a&&m.removeTween();try{a=(new n({smoothChildTiming:!0})).add(e).pause()}catch(t){}finally{e.repeat&&-1===e.repeat()&&(a.repeat(-1),a.yoyo(e.yoyo()))}return O(),m},this.removeTween=function(e){return a&&(e&&O(0),a.kill(),a=void 0),m},this.setPin=function(t,n){var r={pushFollowers:!0,spacerClass:"scrollmagic-pin-spacer",pinnedClass:""};if(n=e.extend({},r,n),t=e(t).first(),0===t.length)return m;if("fixed"==t.css("position"))return m;if(f){if(f===t)return m;m.removePin()}f=t,f.parent().hide();var i="absolute"!=f.css("position"),s=f.css(["display","top","left","bottom","right"]),o=f.css(["width","height"]);f.parent().show(),"0px"===o.width&&i&&u(s.display),!i&&n.pushFollowers&&(n.pushFollowers=!1);var a=e("<div></div>").addClass(n.spacerClass).css(s).data("ScrollMagicPinSpacer",!0).css({position:i?"relative":"absolute","margin-left":"auto","margin-right":"auto","box-sizing":"content-box"}),c=f[0].style;return l={spacer:a,relSize:{width:"%"===o.width.slice(-1),height:"%"===o.height.slice(-1),autoFullWidth:"0px"===o.width&&i&&u(s.display)},pushFollowers:n.pushFollowers,inFlow:i,origStyle:{width:c.width||"",position:c.position||"",top:c.top||"",left:c.left||"",bottom:c.bottom||"",right:c.right||"","box-sizing":c["box-sizing"]||"","-moz-box-sizing":c["-moz-box-sizing"]||"","-webkit-box-sizing":c["-webkit-box-sizing"]||""},pinnedClass:n.pinnedClass},l.relSize.width&&a.css("width",o.width),l.relSize.height&&a.css("height",o.height),f.before(a).appendTo(a).css({position:i?"relative":"absolute",top:"auto",left:"auto",bottom:"auto",right:"auto"}),(l.relSize.width||l.relSize.autoFullWidth)&&f.css("box-sizing","border-box"),e(window).on("scroll."+d+"_pin resize."+d+"_pin",D),f.on("mousewheel DOMMouseScroll",H),M(),m},this.removePin=function(t){return f&&(t||!o?(f.insertBefore(l.spacer).css(l.origStyle),l.spacer.remove()):"DURING"===y&&M(!0),e(window).off("scroll."+d+"_pin resize."+d+"_pin"),f.off("mousewheel DOMMouseScroll",H),f=void 0),m},this.setClassToggle=function(t,n){var r=e(t);return 0===r.length||"string"!==e.type(n)?m:(c=n,h=r,m.on("enter.internal_class leave.internal_class",function(e){h.toggleClass(c,"enter"===e.type)}),m)},this.removeClassToggle=function(e){return h&&e&&h.removeClass(c),m.off("start.internal_class end.internal_class"),c=void 0,h=void 0,m},this.addTo=function(e){return e instanceof r&&o!=e&&(o&&o.removeScene(m),o=e,N(),L(!0),A(!0),k(),_(),o.info("container").on("resize."+d,function(){P(),m.triggerHook()>0&&m.trigger("shift",{reason:"containerSize"})}),e.addScene(m),m.update()),m},this.enabled=function(e){return arguments.length?(S!=e&&(S=!!e,m.update(!0)),m):S},this.remove=function(){if(o){o.info("container").off("resize."+d);var e=o;o=void 0,e.removeScene(m)}return m},this.destroy=function(e){return m.removeTween(e),m.removePin(e),m.removeClassToggle(e),m.trigger("destroy",{reset:e}),m.remove(),m.off("start end enter leave progress change update shift destroy shift.internal change.internal progress.internal"),null},this.on=function(t,n){if(e.isFunction(n)){var r=e.trim(t).toLowerCase().replace(/(\w+)\.(\w+)/g,"$1."+d+"_$2").replace(/( |^)(\w+)(?= |$)/g,"$1$2."+d);e(m).on(r,n)}return m},this.off=function(t,n){var r=e.trim(t).toLowerCase().replace(/(\w+)\.(\w+)/g,"$1."+d+"_$2").replace(/( |^)(\w+)(?= |$)/g,"$1$2."+d+"$3");return e(m).off(r,n),m},this.trigger=function(t,n){var r=e.Event(e.trim(t).toLowerCase(),n);return e(m).trigger(r),m},T(),m},s=function(e,t){var n={top:0,left:0};if(e=e[0],e&&e.getBoundingClientRect){var r=e.getBoundingClientRect();n.top=r.top,n.left=r.left,t||(n.top+=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||0),n.left+=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0))}return n},o=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},u=function(e){return["block","flex","list-item","table","-webkit-box"].indexOf(e)>-1},a=window.requestAnimationFrame,f=window.cancelAnimationFrame;return function(e){var t,n=0,r=["ms","moz","webkit","o"];for(t=0;!a&&t<r.length;++t)a=e[r[t]+"RequestAnimationFrame"],f=e[r[t]+"CancelAnimationFrame"]||e[r[t]+"CancelRequestAnimationFrame"];a||(a=function(t){var r=(new Date).getTime(),i=Math.max(0,16-(r-n)),s=e.setTimeout(function(){t(r+i)},i);return n=r+i,s}),f||(f=function(t){e.clearTimeout(t)})}(window),{Controller:r,Scene:i}});